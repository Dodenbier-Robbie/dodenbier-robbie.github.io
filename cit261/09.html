<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <title>Robbie Dodenbier - CIT 261</title>
        <meta name="description" content="Assignment Portal page for Robbie Dodenbier in CIT 261 - Mobile Web Frontend Development at Brigham Young University - Idaho.">
        <meta name="viewport" content="width=device-width, inital-scale=1">
        <link rel="stylesheet" href="styles/normalize.css">
        <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
        <link rel="stylesheet" href="styles/main.css">
        <link rel="stylesheet" href="styles/password.css">
    </head>
    <body>
        <h2>Standard JavaScript Events Including those for Mobile Devices</h2>
        <p>Password Validation</p>
        <div class="passwordValidation">
            <form action="/action_page.php">
                <label><span>User Name: </span><input type="text" name="userName" id="testUserName"></label>
                <label><span>Password: </span><input type="password" id="psw" name="psw" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required></label>
                <input type="submit" value="Submit">
            </form>
        </div>
        <canvas id="passwordCanvas" height="10px"></canvas>
        <div id="message">
          <h3>Password must contain the following:</h3>
            <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
            <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
            <p id="number" class="invalid">A <b>number</b></p>
            <p id="length" class="invalid">Minimum <b>8 characters</b></p>
        </div>
        <script>
            var myInput = document.getElementById("psw");
            var letter = document.getElementById("letter");
            var capital = document.getElementById("capital");
            var number = document.getElementById("number");
            var length = document.getElementById("length");
            
            var canvas = document.getElementById("passwordCanvas");
            var ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "red";
            ctx.fillRect(0, 0, 300, 10);

            // When the user clicks on the password field, show the message box
            myInput.onfocus = function() {
                document.getElementById("message").style.display = "block";
                document.getElementById("passwordCanvas").style.display = "block";
            }

            // When the user clicks outside of the password field, hide the message box
            myInput.onblur = function() {
                document.getElementById("message").style.display = "none";
                document.getElementById("passwordCanvas").style.display = "none";
            }
            
            myInput.onkeyup = function() {
                var lowerCase = /[a-z]/g;
                if(myInput.value.match(lowerCase)) {
                    letter.classList.remove("invalid");
                    letter.classList.add("valid");
                    var lowCaseScore = 1;
                }else {
                    letter.classList.remove("valid");
                    letter.classList.add("invalid");
                    var lowCaseScore = 0;
                }
                
                var upperCase = /[A-Z]/g;
                if(myInput.value.match(upperCase)) {
                    capital.classList.remove("invalid");
                    capital.classList.add("valid");
                    var upperCaseScore = 1;
                }else {
                    capital.classList.remove("valid");
                    capital.classList.add("invalid");
                    var upperCaseScore = 0;
                }
                
                var numberCheck = /[0-9]/g;
                if(myInput.value.match(numberCheck)) {
                    number.classList.remove("invalid");
                    number.classList.add("valid");
                    var numberScore = 1;
                }else {
                    number.classList.remove("valid");
                    number.classList.add("invalid");
                    var numberScore = 0;
                }
                
                if(myInput.value.length >= 8) {
                    length.classList.remove("invalid");
                    length.classList.add("valid");
                    var lengthScore = 2;
                }else {
                    length.classList.remove("valid");
                    length.classList.add("invalid");
                    var lengthScore = 0;
                }
                
                var securityScore = lowCaseScore + upperCaseScore + numberScore + lengthScore;
                if(securityScore == 1) {
                    ctx.fillStyle = "green";
                    ctx.fillRect(0, 0, 50, 10);
                }
                
                if(securityScore == 2) {
                    ctx.fillStyle = "green";
                    ctx.fillRect(0, 0, 100, 10);
                }
                
                if(securityScore == 3) {
                    ctx.fillStyle = "green";
                    ctx.fillRect(0, 0, 150, 10);
                }
                
                if(securityScore > 3) {
                    ctx.fillStyle = "green";
                    ctx.fillRect(0, 0, 300, 10);
                }
            }
        </script>
    </body>
</html>
